<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webhook Master Dashboard</title>
    <style>
        :root { --primary: #00d2ff; --secondary: #3a7bd5; --bg: #0f172a; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Sidebar Estilizada */
        .sidebar { width: 320px; background: rgba(0,0,0,0.4); padding: 25px; border-right: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; gap: 15px; overflow-y: auto; backdrop-filter: blur(10px); }
        .sidebar h3 { color: var(--primary); margin: 0; font-size: 18px; border-bottom: 1px solid rgba(0,210,255,0.3); padding-bottom: 10px; }
        
        .group { display: flex; flex-direction: column; gap: 5px; }
        label { font-size: 10px; text-transform: uppercase; color: #94a3b8; font-weight: bold; letter-spacing: 1px; margin-top: 10px; }
        input, textarea { background: rgba(30, 41, 59, 0.7); border: 1px solid #334155; border-radius: 10px; color: white; padding: 12px; font-size: 13px; transition: 0.3s; }
        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 10px rgba(0,210,255,0.2); }
        
        /* Bot√µes Modernos */
        .btn { cursor: pointer; border: none; border-radius: 10px; font-weight: bold; transition: 0.3s; padding: 14px; text-align: center; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .btn-yellow { background: #facc15; color: #000; margin-top: 10px; }
        .btn:hover { transform: translateY(-2px); filter: brightness(1.1); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .btn:active { transform: translateY(0); }

        .main { flex: 1; display: flex; justify-content: center; align-items: center; position: relative; background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%); }
        .card { background: rgba(255,255,255,0.03); backdrop-filter: blur(20px); padding: 40px; border-radius: 25px; width: 450px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        
        #status { text-align: center; margin-top: 20px; font-size: 13px; padding: 10px; border-radius: 8px; min-height: 20px; }
        .status-error { background: rgba(255, 77, 77, 0.1); color: #ff4d4d; border: 1px solid rgba(255, 77, 77, 0.2); }
        .status-success { background: rgba(0, 255, 136, 0.1); color: #00ff88; border: 1px solid rgba(0, 255, 136, 0.2); }
    </style>
</head>
<body>

<div class="sidebar">
    <h3>‚öôÔ∏è Configura√ß√µes</h3>
    
    <div class="group">
        <label>Token do Bot (Secret)</label>
        <input type="password" id="botToken" placeholder="MTA0...">
    </div>

    <div class="group">
        <label>ID do Canal</label>
        <input type="text" id="chanId" placeholder="ID do Canal alvo">
    </div>

    <button class="btn btn-yellow" onclick="gerarWebhook()">‚ö° VINCULAR CANAL AGORA</button>

    <div class="group" style="margin-top: 20px;">
        <label>Webhook URL Ativa</label>
        <input type="text" id="webUrl" readonly style="font-size: 10px; opacity: 0.6;" placeholder="Aguardando v√≠nculo...">
    </div>
</div>

<div class="main">
    <div class="card">
        <h2 style="margin-top:0; font-size: 24px;">Nova Mensagem</h2>
        
        <div class="group">
            <label>Nome de Exibi√ß√£o do Bot</label>
            <input type="text" id="botName" placeholder="Ex: Jarvis">
        </div>

        <div class="group" style="margin-top:15px">
            <label>Mensagem</label>
            <textarea id="msgText" rows="4" placeholder="O que deseja enviar?"></textarea>
        </div>

        <div class="group" style="margin-top:15px">
            <label>Anexar Arquivo</label>
            <input type="file" id="msgFile" style="font-size: 11px;">
        </div>

        <button class="btn btn-primary" style="width:100%; margin-top:30px; font-size:16px;" onclick="enviar()">ENVIAR PARA O DISCORD</button>
        <div id="status"></div>
    </div>
</div>

<script>
    // Mem√≥ria do navegador
    window.onload = () => {
        document.getElementById('botToken').value = localStorage.getItem('tk') || '';
        document.getElementById('chanId').value = localStorage.getItem('cid') || '';
        document.getElementById('botName').value = localStorage.getItem('bn') || '';
        document.getElementById('webUrl').value = localStorage.getItem('wurl') || '';
    };

    function save() {
        localStorage.setItem('tk', document.getElementById('botToken').value);
        localStorage.setItem('cid', document.getElementById('chanId').value);
        localStorage.setItem('bn', document.getElementById('botName').value);
    }

    async function gerarWebhook() {
        save();
        const token = document.getElementById('botToken').value.trim();
        const channelId = document.getElementById('chanId').value.trim();
        const name = document.getElementById('botName').value || "Webhook Dash";
        const status = document.getElementById('status');

        if(!token || !channelId) {
            status.innerHTML = "Preencha o Token e o ID!";
            status.className = "status-error";
            return;
        }

        status.innerHTML = "‚è≥ Tentando vincular...";
        status.className = "";

        try {
            const res = await fetch(`https://discord.com/api/v10/channels/${channelId}/webhooks`, {
                method: 'POST',
                headers: { 
                    "Authorization": `Bot ${token}`,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ name: name })
            });

            const data = await res.json();

            if (res.ok && data.url) {
                document.getElementById('webUrl').value = data.url;
                localStorage.setItem('wurl', data.url);
                status.innerHTML = "‚úÖ Canal vinculado com sucesso!";
                status.className = "status-success";
            } else {
                let errorMsg = data.message || "Erro desconhecido";
                if(res.status === 403) errorMsg = "O Bot n√£o est√° no servidor ou n√£o tem permiss√£o.";
                if(res.status === 404) errorMsg = "ID do Canal n√£o encontrado.";
                throw new Error(errorMsg);
            }
        } catch(e) {
            status.innerHTML = `‚ùå Erro: ${e.message}`;
            status.className = "status-error";
        }
    }

    async function enviar() {
        const url = document.getElementById('webUrl').value;
        const text = document.getElementById('msgText').value;
        const name = document.getElementById('botName').value;
        const file = document.getElementById('msgFile').files[0];
        const status = document.getElementById('status');

        if(!url) {
            status.innerHTML = "Gere o Webhook primeiro!";
            status.className = "status-error";
            return;
        }

        const formData = new FormData();
        formData.append('payload_json', JSON.stringify({ content: text, username: name }));
        if(file) formData.append('file', file);

        status.innerHTML = "üöÄ Enviando...";
        status.className = "";

        try {
            const res = await fetch(url, { method: 'POST', body: formData });
            if(res.ok) {
                status.innerHTML = "‚úÖ Mensagem enviada!";
                status.className = "status-success";
                document.getElementById('msgText').value = "";
            } else {
                status.innerHTML = "‚ùå Erro ao enviar para o Webhook.";
                status.className = "status-error";
            }
        } catch(e) {
            status.innerHTML = "‚ùå Erro de conex√£o/CORS.";
            status.className = "status-error";
        }
    }
</script>

</body>
</html>
